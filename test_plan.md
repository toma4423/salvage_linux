# USB Boot Linux GUI ディスクユーティリティ テスト計画書

## 1. 概要

このテスト計画は、USB Boot Linux GUI ディスクユーティリティのテスト方法と手順を定義します。テストはユニットテスト、統合テスト、システムテスト、パッケージングテストの4つのフェーズに分けて実施します。

## 2. テスト環境

### 開発環境
- OS: Linux (Lubuntu)
- 実行環境: VirtualBox

### 実機テスト環境
- PyInstallerでパッケージングした実行ファイルを使用

## 3. テスト項目

### 3.1 機能テスト

以下の機能について、正常系と異常系の両方をテストします：

1. **未マウントディスクのマウント**
   - 正常系: 有効なディスクを正しくマウントできること
   - 異常系: 無効なディスクや権限不足の場合、適切なエラーメッセージが表示されること

2. **コピー先ディスクのフォーマット**
   - 正常系: 各種ファイルシステム（NTFS, exFAT, FAT32, ext4）でフォーマットが成功すること
   - 異常系: 無効なディスクや権限不足の場合、適切なエラーメッセージが表示されること

3. **マウント済みディスクの操作**
   - 正常系: マウント済みディスクが一覧表示され、選択できること
   - 異常系: 無効な操作をした場合、適切なエラー処理がされること

4. **権限付与**
   - 正常系: マウント済みディスクに正しく権限が付与されること
   - 異常系: 権限付与に失敗した場合、適切なエラーメッセージが表示されること

5. **エラー処理**
   - 各種エラー（ディスクなし、マウント失敗、フォーマット失敗など）が適切に処理されること

6. **ログ機能**
   - 操作ログが正しく記録されること

### 3.2 性能テスト

1. **応答時間**
   - GUIの応答時間が許容範囲内であること
   - 長時間実行される操作（フォーマットなど）中もGUIが応答し続けること

2. **リソース消費**
   - メモリ消費が許容範囲内であること
   - CPU使用率が許容範囲内であること

### 3.3 セキュリティテスト

1. **権限昇格**
   - 必要な場合のみ権限昇格が行われること
   - 不正な権限昇格ができないこと

2. **ファイルシステムの保護**
   - システムディレクトリのフォーマットが禁止されていること
   - コマンドインジェクション攻撃が防止されていること

### 3.4 ユーザビリティテスト

1. **操作性**
   - ユーザーインターフェースが直感的で使いやすいこと
   - エラーメッセージが分かりやすいこと

2. **アクセシビリティ**
   - ボタンやラベルが適切なサイズとコントラストであること
   - キーボード操作が可能であること

## 4. テスト実行計画

### 4.1 ユニットテスト

以下のモジュールに対してユニットテストを実行します：

1. Logger クラス
   - ログ記録機能が正しく動作すること
   - ログファイルが適切に作成されること

2. DiskUtils クラス
   - ディスク一覧取得機能が正しく動作すること
   - マウント、フォーマット、権限付与の各関数が正しく動作すること

**実行方法**：
```bash
# ユニットテストを実行
pytest tests/unit/
```

### 4.2 統合テスト

以下のモジュールの組み合わせに対して統合テストを実行します：

1. DiskUtils と Logger の連携
   - DiskUtilsの操作がLoggerによって正しく記録されること

**実行方法**：
```bash
# 統合テストを実行
pytest tests/integration/
```

### 4.3 システムテスト

GUIを含めたアプリケーション全体に対してシステムテストを実行します：

1. GUI クラス
   - ウィジェットが正しく初期化されること
   - ユーザーイベントに対して正しく反応すること
   - DiskUtilsと連携して各種操作が正しく実行されること

2. パフォーマンステスト
   - 長時間操作や大量データ処理時の性能を確認すること

3. セキュリティテスト
   - 不正な入力やパスに対して適切に防御されていること

4. ユーザビリティテスト
   - ユーザーインターフェースの使いやすさを確認すること

**実行方法**：
```bash
# システムテストを実行
pytest tests/system/
```

### 4.4 パッケージングテスト

PyInstallerを使用してパッケージングした実行ファイルに対してテストを実行します：

1. パッケージングの成功確認
   - 実行ファイルが正しく生成されること

2. 実行ファイルの動作確認
   - 実行ファイルが起動すること
   - 基本機能が正しく動作すること

**実行方法**：
```bash
# パッケージングとテストを実行
bash tests/packaging/run_package_tests.sh
```

## 5. テスト実施手順

1. ユニットテストを実行し、すべてのテストが成功することを確認します。
2. 統合テストを実行し、すべてのテストが成功することを確認します。
3. システムテストを実行し、すべてのテストが成功することを確認します。
4. パッケージングテストを実行し、実行ファイルが正しく動作することを確認します。
5. 実機環境（VirtualBox外）に実行ファイルをコピーし、動作確認を行います。

## 6. バグ報告と修正手順

1. バグを発見した場合は、以下の情報を含むバグ報告を作成します：
   - バグの概要
   - 再現手順
   - 期待される動作
   - 実際の動作
   - 環境情報（OS、実行環境）

2. バグを修正し、該当するテストを再実行して修正が成功したことを確認します。

3. 必要に応じて、バグの再発を防ぐための新しいテストを追加します。

## 7. テスト成果物

テスト実行後、以下の成果物を保存します：

1. テスト結果レポート
2. カバレッジレポート
3. パフォーマンス測定データ
4. バグ報告と修正記録

## 8. テスト自動化

テストを自動化するために、以下の方法を使用します：

1. 継続的インテグレーション（CI）パイプラインの構築
2. テスト実行スクリプトの作成
3. テスト結果の自動レポート生成

## 9. まとめ

このテスト計画に従ってテストを実施することで、USB Boot Linux GUI ディスクユーティリティの品質を確保し、信頼性の高いアプリケーションをリリースすることを目指します。 