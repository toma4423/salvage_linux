# リリースガイド

このドキュメントでは、Salvage Linuxのリリース手順について説明します。

## リリースプロセス

### 1. バージョン番号の更新

`src/version.py` ファイル内の `__version__` を更新します：

```python
# バージョン番号 (セマンティックバージョニング)
__version__ = "0.1.0"  # 新しいバージョン番号に変更
```

### 2. 変更履歴の更新

`CHANGELOG.md` にリリースノートを追加します：

```markdown
## [0.1.0] - YYYY-MM-DD

### 追加
- 新機能A
- 新機能B

### 変更
- 変更点A
- 変更点B

### 修正
- バグ修正A
- バグ修正B
```

### 3. ローカルでのテスト

リリース前に、ローカル環境でアプリケーションをテストします：

```bash
# テストの実行
python -m pytest

# ビルドテストスクリプトの実行
./build_test.sh
```

### 4. リリースタグの作成とプッシュ

```bash
# リリースブランチの作成（オプション）
git checkout -b release/v0.1.0

# 変更をコミット
git add src/version.py CHANGELOG.md
git commit -m "バージョン0.1.0へのバージョンアップ"

# マスターブランチにマージ
git checkout main
git merge --no-ff release/v0.1.0

# タグを作成してプッシュ
git tag -a v0.1.0 -m "バージョン0.1.0"
git push origin main --tags
```

### 5. GitHub Actionsの実行

タグをプッシュすると、GitHub Actionsが自動的に実行され、以下の処理が行われます：

1. コードのチェックアウト
2. Pythonのセットアップ
3. 依存関係のインストール
4. テストの実行
5. PyInstallerを使用したビルド
6. 実行権限の付与
7. GitHubリリースの作成

### 6. リリースの確認

GitHub上で自動作成されたリリースを確認し、必要に応じて説明文を編集します。

## リリースのテスト

リリースされたバイナリは以下の方法でテストできます：

1. GitHubリリースページからバイナリをダウンロード
2. 実行権限を確認/付与：`chmod +x salvage_linux`
3. 実行：`sudo ./salvage_linux`

## トラブルシューティング

### ビルドに失敗する場合

- GitHub Actionsのログを確認
- ローカルでビルドテストを行い、問題を特定
- 依存関係に問題がないか確認

### 実行時にエラーが発生する場合

- 権限の問題：`sudo` で実行しているか確認
- 依存関係の問題：必要なシステムライブラリがインストールされているか確認
- ログを確認：実行時のエラーメッセージを確認 